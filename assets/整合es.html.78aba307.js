import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as d,c as l,a as e,b as n,d as t,f as u,r as a}from"./app.4d667c68.js";const r="/assets/7c6b48cd.4731efdb.png",v="data:image/png;base64,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",c="/assets/87898aa9.cde8e0be.png",o="data:image/png;base64,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",m="/assets/0c10ee91.2b41ed2d.png",b={},q=e("h1",{id:"\u6574\u5408es",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u6574\u5408es","aria-hidden":"true"},"#"),n(" \u6574\u5408es")],-1),p={href:"https://blog.csdn.net/Alaric_L/article/details/123614683",target:"_blank",rel:"noopener noreferrer"},g=u(`<h4 id="\u5F15\u5165\u76F8\u5173\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u5F15\u5165\u76F8\u5173\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165\u76F8\u5173\u4F9D\u8D56</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165es\u7684\u5750\u6807--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-high-level-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="javaapi\u7D22\u5F15\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#javaapi\u7D22\u5F15\u64CD\u4F5C" aria-hidden="true">#</a> JavaAPI\u7D22\u5F15\u64CD\u4F5C</h4><h5 id="\u6DFB\u52A0\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u7D22\u5F15" aria-hidden="true">#</a> \u6DFB\u52A0\u7D22\u5F15</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/**
    * \u6DFB\u52A0\u7D22\u5F15
    * @throws IOException
    */
   @Test
   public void addIndex() throws IOException {
      //1.\u4F7F\u7528client\u83B7\u53D6\u64CD\u4F5C\u7D22\u5F15\u5BF9\u8C61
       IndicesClient indices = client.indices();
       //2.\u5177\u4F53\u64CD\u4F5C\u83B7\u53D6\u8FD4\u56DE\u503C
       //2.1 \u8BBE\u7F6E\u7D22\u5F15\u540D\u79F0
       CreateIndexRequest createIndexRequest=new CreateIndexRequest(&quot;person&quot;);

       CreateIndexResponse createIndexResponse = indices.create(createIndexRequest, RequestOptions.DEFAULT);
       //3.\u6839\u636E\u8FD4\u56DE\u503C\u5224\u65AD\u7ED3\u679C
       System.out.println(createIndexResponse.isAcknowledged());
   }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6DFB\u52A0\u7D22\u5F15-\u5E76\u6DFB\u52A0\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u7D22\u5F15-\u5E76\u6DFB\u52A0\u6620\u5C04" aria-hidden="true">#</a> \u6DFB\u52A0\u7D22\u5F15\uFF0C\u5E76\u6DFB\u52A0\u6620\u5C04</h5><pre><code>    @Test
    public void addIndexAndMapping() throws IOException {
    //1.\u4F7F\u7528client\u83B7\u53D6\u64CD\u4F5C\u7D22\u5F15\u5BF9\u8C61
    IndicesClient indices = client.indices();
    //2.\u5177\u4F53\u64CD\u4F5C\u83B7\u53D6\u8FD4\u56DE\u503C
    //2.\u5177\u4F53\u64CD\u4F5C\uFF0C\u83B7\u53D6\u8FD4\u56DE\u503C
    CreateIndexRequest createIndexRequest = new CreateIndexRequest(&quot;person&quot;);
    //2.1 \u8BBE\u7F6Emappings
    String mapping = &quot;{\\n&quot; +
    &quot;      \\&quot;properties\\&quot; : {\\n&quot; +
    &quot;        \\&quot;address\\&quot; : {\\n&quot; +
    &quot;          \\&quot;type\\&quot; : \\&quot;text\\&quot;,\\n&quot; +
    &quot;          \\&quot;analyzer\\&quot; : \\&quot;ik_max_word\\&quot;\\n&quot; +
    &quot;        },\\n&quot; +
    &quot;        \\&quot;age\\&quot; : {\\n&quot; +
    &quot;          \\&quot;type\\&quot; : \\&quot;long\\&quot;\\n&quot; +
    &quot;        },\\n&quot; +
    &quot;        \\&quot;name\\&quot; : {\\n&quot; +
    &quot;          \\&quot;type\\&quot; : \\&quot;keyword\\&quot;\\n&quot; +
    &quot;        }\\n&quot; +
    &quot;      }\\n&quot; +
    &quot;    }&quot;;
    createIndexRequest.mapping(mapping,XContentType.JSON);

    CreateIndexResponse createIndexResponse = indices.create(createIndexRequest, RequestOptions.DEFAULT);
    //3.\u6839\u636E\u8FD4\u56DE\u503C\u5224\u65AD\u7ED3\u679C
    System.out.println(createIndexResponse.isAcknowledged());
}
</code></pre><h5 id="\u67E5\u8BE2\u3001\u5220\u9664\u3001\u5224\u65AD\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u3001\u5220\u9664\u3001\u5224\u65AD\u7D22\u5F15" aria-hidden="true">#</a> \u67E5\u8BE2\u3001\u5220\u9664\u3001\u5224\u65AD\u7D22\u5F15</h5><p>\u67E5\u8BE2\u7D22\u5F15</p><pre><code>/**
 * \u67E5\u8BE2\u7D22\u5F15
 */
@Test
public void queryIndex() throws IOException {
    IndicesClient indices = client.indices();

    GetIndexRequest getRequest=new GetIndexRequest(&quot;person&quot;);
    GetIndexResponse response = indices.get(getRequest, RequestOptions.DEFAULT);
    Map&lt;String, MappingMetaData&gt; mappings = response.getMappings();
    //iter \u63D0\u793Aforeach
    for (String key : mappings.keySet()) {
        System.out.println(key+&quot;===&quot;+mappings.get(key).getSourceAsMap());
    }
}
</code></pre><p>\u5220\u9664\u7D22\u5F15</p><pre><code>/**
 * \u5220\u9664\u7D22\u5F15
 */
@Test
public void deleteIndex() throws IOException {
     IndicesClient indices = client.indices();
    DeleteIndexRequest deleteRequest=new DeleteIndexRequest(&quot;person&quot;);
    AcknowledgedResponse delete = indices.delete(deleteRequest, RequestOptions.DEFAULT);
    System.out.println(delete.isAcknowledged());

}
</code></pre><p>\u7D22\u5F15\u662F\u5426\u5B58\u5728</p><pre><code>/**
 * \u7D22\u5F15\u662F\u5426\u5B58\u5728
 */
@Test
public void existIndex() throws IOException {
    IndicesClient indices = client.indices();

    GetIndexRequest getIndexRequest=new GetIndexRequest(&quot;person&quot;);
    boolean exists = indices.exists(getIndexRequest, RequestOptions.DEFAULT);
    System.out.println(exists);

}
</code></pre><h4 id="javaapi-\u6587\u6863\u589E\u5220\u6539\u67E5" tabindex="-1"><a class="header-anchor" href="#javaapi-\u6587\u6863\u589E\u5220\u6539\u67E5" aria-hidden="true">#</a> JavaApi-\u6587\u6863\u589E\u5220\u6539\u67E5</h4><h5 id="\u6DFB\u52A0\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u6587\u6863" aria-hidden="true">#</a> \u6DFB\u52A0\u6587\u6863</h5><h6 id="_1-\u4F7F\u7528map\u4F5C\u4E3A\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_1-\u4F7F\u7528map\u4F5C\u4E3A\u6570\u636E" aria-hidden="true">#</a> 1.\u4F7F\u7528map\u4F5C\u4E3A\u6570\u636E</h6><pre><code>@Test
public void addDoc1() throws IOException {
Map&lt;String, Object&gt; map=new HashMap&lt;&gt;();
map.put(&quot;name&quot;,&quot;\u5F20\u4E09&quot;);
map.put(&quot;age&quot;,&quot;18&quot;);
map.put(&quot;address&quot;,&quot;\u5317\u4EAC\u4E8C\u73AF&quot;);
IndexRequest request=new IndexRequest(&quot;person&quot;).id(&quot;1&quot;).source(map);
IndexResponse response = client.index(request, RequestOptions.DEFAULT);
System.out.println(response.getId());
}
</code></pre><h6 id="_2-\u6DFB\u52A0\u6587\u6863-\u4F7F\u7528\u5BF9\u8C61\u4F5C\u4E3A\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_2-\u6DFB\u52A0\u6587\u6863-\u4F7F\u7528\u5BF9\u8C61\u4F5C\u4E3A\u6570\u636E" aria-hidden="true">#</a> 2.\u6DFB\u52A0\u6587\u6863,\u4F7F\u7528\u5BF9\u8C61\u4F5C\u4E3A\u6570\u636E</h6><pre><code>@Test
public void addDoc2() throws IOException {
Person person=new Person();
person.setId(&quot;2&quot;);
person.setName(&quot;\u674E\u56DB&quot;);
person.setAge(20);
person.setAddress(&quot;\u5317\u4EAC\u4E09\u73AF&quot;);
String data = JSON.toJSONString(person);
IndexRequest request=new IndexRequest(&quot;person&quot;).id(person.getId()).source(data,XContentType.JSON);
IndexResponse response = client.index(request, RequestOptions.DEFAULT);
System.out.println(response.getId());
}
</code></pre><h5 id="\u4FEE\u6539\u3001\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u3001\u67E5\u8BE2" aria-hidden="true">#</a> \u4FEE\u6539\u3001\u67E5\u8BE2</h5><h6 id="\u4FEE\u6539\u6587\u6863-\u6DFB\u52A0\u6587\u6863\u65F6-\u5982\u679Cid\u5B58\u5728\u5219\u4FEE\u6539-id\u4E0D\u5B58\u5728\u5219\u6DFB\u52A0" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u6587\u6863-\u6DFB\u52A0\u6587\u6863\u65F6-\u5982\u679Cid\u5B58\u5728\u5219\u4FEE\u6539-id\u4E0D\u5B58\u5728\u5219\u6DFB\u52A0" aria-hidden="true">#</a> \u4FEE\u6539\u6587\u6863\uFF1A\u6DFB\u52A0\u6587\u6863\u65F6\uFF0C\u5982\u679Cid\u5B58\u5728\u5219\u4FEE\u6539\uFF0Cid\u4E0D\u5B58\u5728\u5219\u6DFB\u52A0</h6><pre><code>@Test
public void UpdateDoc() throws IOException {
    Person person=new Person();
    person.setId(&quot;2&quot;);
    person.setName(&quot;\u674E\u56DB&quot;);
    person.setAge(20);
    person.setAddress(&quot;\u5317\u4EAC\u4E09\u73AF\u8F66\u738B&quot;);

    String data = JSON.toJSONString(person);

    IndexRequest request=new IndexRequest(&quot;person&quot;).id(person.getId()).source(data,XContentType.JSON);
    IndexResponse response = client.index(request, RequestOptions.DEFAULT);
    System.out.println(response.getId());
}
</code></pre><h6 id="\u6839\u636Eid\u67E5\u8BE2\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u6839\u636Eid\u67E5\u8BE2\u6587\u6863" aria-hidden="true">#</a> \u6839\u636Eid\u67E5\u8BE2\u6587\u6863</h6><pre><code>@Test
public void getDoc() throws IOException {

    //\u8BBE\u7F6E\u67E5\u8BE2\u7684\u7D22\u5F15\u3001\u6587\u6863
    GetRequest indexRequest=new GetRequest(&quot;person&quot;,&quot;2&quot;);

    GetResponse response = client.get(indexRequest, RequestOptions.DEFAULT);
    System.out.println(response.getSourceAsString());
}
</code></pre><h5 id="\u5220\u9664\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u6587\u6863" aria-hidden="true">#</a> \u5220\u9664\u6587\u6863</h5><h6 id="\u6839\u636Eid\u5220\u9664\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u6839\u636Eid\u5220\u9664\u6587\u6863" aria-hidden="true">#</a> \u6839\u636Eid\u5220\u9664\u6587\u6863</h6><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/**
* \u6839\u636Eid\u5220\u9664\u6587\u6863
*/
@Test
public void delDoc() throws IOException {

        //\u8BBE\u7F6E\u8981\u5220\u9664\u7684\u7D22\u5F15\u3001\u6587\u6863
        DeleteRequest deleteRequest=new DeleteRequest(&quot;person&quot;,&quot;1&quot;);

        DeleteResponse response = client.delete(deleteRequest, RequestOptions.DEFAULT);
        System.out.println(response.getId());
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u5220\u9664\u6EE1\u8DB3\u7ED9\u5B9A\u6761\u4EF6\u7684\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u6EE1\u8DB3\u7ED9\u5B9A\u6761\u4EF6\u7684\u6587\u6863" aria-hidden="true">#</a> \u5220\u9664\u6EE1\u8DB3\u7ED9\u5B9A\u6761\u4EF6\u7684\u6587\u6863</h6><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/**
 * \u5220\u9664\u6EE1\u8DB3\u7ED9\u5B9A\u6761\u4EF6\u7684\u6587\u6863
 */
@Test
void test09() throws IOException {
    //\u8BBE\u7F6E\u8981\u5220\u9664\u7684\u7D22\u5F15
    DeleteByQueryRequest deleteByQueryRequest = new DeleteByQueryRequest(&quot;person&quot;);
    //\u8BBE\u7F6E\u6761\u4EF6\uFF0C\u53EF\u8BBE\u7F6E\u591A\u4E2A
    deleteByQueryRequest.setQuery(new TermQueryBuilder(&quot;age&quot;, 11));
    deleteByQueryRequest.setQuery(new TermQueryBuilder(&quot;name&quot;, \u5F20\u4E09));

    // \u8BBE\u7F6E\u5E76\u884C
    deleteByQueryRequest.setSlices(2);
    // \u8BBE\u7F6E\u8D85\u65F6
    deleteByQueryRequest.setTimeout(TimeValue.timeValueMinutes(2));
    BulkByScrollResponse response = client.deleteByQuery(deleteByQueryRequest, RequestOptions.DEFAULT);
    System.out.println(response.getStatus().getDeleted());
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bulk\u6279\u91CF\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#bulk\u6279\u91CF\u64CD\u4F5C" aria-hidden="true">#</a> bulk\u6279\u91CF\u64CD\u4F5C</h4><h5 id="bulk\u6279\u91CF\u64CD\u4F5C-\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#bulk\u6279\u91CF\u64CD\u4F5C-\u811A\u672C" aria-hidden="true">#</a> bulk\u6279\u91CF\u64CD\u4F5C-\u811A\u672C</h5><p>\u811A\u672C\uFF1A</p><p>\u6D4B\u8BD5\u7528\u76845\u53F7\u6587\u6863</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>POST /person1/_doc/5
{
  &quot;name&quot;:&quot;\u5F20\u4E095\u53F7&quot;,
  &quot;age&quot;:18,
  &quot;address&quot;:&quot;\u5317\u4EAC\u6D77\u6DC0\u533A&quot;
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6279\u91CF\u64CD\u4F5C\u6587\u672C</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\u6279\u91CF\u64CD\u4F5C
#1.\u5220\u96645\u53F7
#2.\u65B0\u589E8\u53F7
#3.\u66F4\u65B02\u53F7 name\u4E3A2\u53F7
POST _bulk
{&quot;delete&quot;:{&quot;_index&quot;:&quot;person1&quot;,&quot;_id&quot;:&quot;5&quot;}}
{&quot;create&quot;:{&quot;_index&quot;:&quot;person1&quot;,&quot;_id&quot;:&quot;8&quot;}}
{&quot;name&quot;:&quot;\u516B\u53F7&quot;,&quot;age&quot;:18,&quot;address&quot;:&quot;\u5317\u4EAC&quot;}
{&quot;update&quot;:{&quot;_index&quot;:&quot;person1&quot;,&quot;_id&quot;:&quot;2&quot;}}
{&quot;doc&quot;:{&quot;name&quot;:&quot;2\u53F7&quot;}}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;took&quot; : 51,
  &quot;errors&quot; : true,
  &quot;items&quot; : [
    {
      &quot;delete&quot; : {
        &quot;_index&quot; : &quot;person1&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;5&quot;,
        &quot;_version&quot; : 2,
        &quot;result&quot; : &quot;deleted&quot;,
        &quot;_shards&quot; : {
          &quot;total&quot; : 2,
          &quot;successful&quot; : 1,
          &quot;failed&quot; : 0
        },
        &quot;_seq_no&quot; : 6,
        &quot;_primary_term&quot; : 2,
        &quot;status&quot; : 200
      }
    },
    {
      &quot;create&quot; : {
        &quot;_index&quot; : &quot;person1&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;8&quot;,
        &quot;_version&quot; : 1,
        &quot;result&quot; : &quot;created&quot;,
        &quot;_shards&quot; : {
          &quot;total&quot; : 2,
          &quot;successful&quot; : 1,
          &quot;failed&quot; : 0
        },
        &quot;_seq_no&quot; : 7,
        &quot;_primary_term&quot; : 2,
        &quot;status&quot; : 201
      }
    },
    {
      &quot;update&quot; : {
        &quot;_index&quot; : &quot;person1&quot;,
        &quot;_type&quot; : &quot;_doc&quot;,
        &quot;_id&quot; : &quot;2&quot;,
        &quot;_version&quot; : 2,
        &quot;result&quot; : &quot;updated&quot;,
        &quot;_shards&quot; : {
          &quot;total&quot; : 2,
          &quot;successful&quot; : 1,
          &quot;failed&quot; : 0
        },
        &quot;_seq_no&quot; : 10,
        &quot;_primary_term&quot; : 2,
        &quot;status&quot; : 200
      }
    }
  ]
}


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="bulk\u6279\u91CF\u64CD\u4F5C-javaapi" tabindex="-1"><a class="header-anchor" href="#bulk\u6279\u91CF\u64CD\u4F5C-javaapi" aria-hidden="true">#</a> bulk\u6279\u91CF\u64CD\u4F5C-JavaAPI</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> /**
     *  Bulk \u6279\u91CF\u64CD\u4F5C
     */
    @Test
    public void test2() throws IOException {

        //\u521B\u5EFAbulkrequest\u5BF9\u8C61\uFF0C\u6574\u5408\u6240\u6709\u64CD\u4F5C
        BulkRequest bulkRequest =new BulkRequest();

           /*
        # 1. \u5220\u96645\u53F7\u8BB0\u5F55
        # 2. \u6DFB\u52A06\u53F7\u8BB0\u5F55
        # 3. \u4FEE\u65393\u53F7\u8BB0\u5F55 \u540D\u79F0\u4E3A \u201C\u4E09\u53F7\u201D
         */
        //\u6DFB\u52A0\u5BF9\u5E94\u64CD\u4F5C
        //1. \u5220\u96645\u53F7\u8BB0\u5F55
        DeleteRequest deleteRequest=new DeleteRequest(&quot;person1&quot;,&quot;5&quot;);
        bulkRequest.add(deleteRequest);

        //2. \u6DFB\u52A06\u53F7\u8BB0\u5F55
        Map&lt;String, Object&gt; map=new HashMap&lt;&gt;();
        map.put(&quot;name&quot;,&quot;\u516D\u53F7&quot;);
        IndexRequest indexRequest=new IndexRequest(&quot;person1&quot;).id(&quot;6&quot;).source(map);
        bulkRequest.add(indexRequest);
        //3. \u4FEE\u65393\u53F7\u8BB0\u5F55 \u540D\u79F0\u4E3A \u201C\u4E09\u53F7\u201D
        Map&lt;String, Object&gt; mapUpdate=new HashMap&lt;&gt;();
        mapUpdate.put(&quot;name&quot;,&quot;\u4E09\u53F7&quot;);
        UpdateRequest updateRequest=new UpdateRequest(&quot;person1&quot;,&quot;3&quot;).doc(mapUpdate);

        bulkRequest.add(updateRequest);
        //\u6267\u884C\u6279\u91CF\u64CD\u4F5C


        BulkResponse response = client.bulk(bulkRequest, RequestOptions.DEFAULT);
        System.out.println(response.status());

    }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6279\u91CF\u5BFC\u5165\u6570\u636E-\u4EE3\u7801\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#\u6279\u91CF\u5BFC\u5165\u6570\u636E-\u4EE3\u7801\u5B9E\u73B0" aria-hidden="true">#</a> \u6279\u91CF\u5BFC\u5165\u6570\u636E-\u4EE3\u7801\u5B9E\u73B0</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> /**
     * \u4ECEMysql \u6279\u91CF\u5BFC\u5165 elasticSearch
     */
    @Test
    public void test3() throws IOException {
        //1.\u67E5\u8BE2\u6240\u6709\u6570\u636E\uFF0Cmysql
        List&lt;Goods&gt; goodsList = goodsMapper.findAll();

        //2.bulk\u5BFC\u5165
        BulkRequest bulkRequest=new BulkRequest();

        //2.1 \u5FAA\u73AFgoodsList\uFF0C\u521B\u5EFAIndexRequest\u6DFB\u52A0\u6570\u636E
        for (Goods goods : goodsList) {

            //2.2 \u8BBE\u7F6Espec\u89C4\u683C\u4FE1\u606F Map\u7684\u6570\u636E   specStr:{}
            String specStr = goods.getSpecStr();

            //\u5C06json\u683C\u5F0F\u5B57\u7B26\u4E32\u8F6C\u4E3AMap\u96C6\u5408
            Map map = JSON.parseObject(specStr, Map.class);

            //\u8BBE\u7F6Espec map
            goods.setSpec(map);

            //\u5C06goods\u5BF9\u8C61\u8F6C\u6362\u4E3Ajson\u5B57\u7B26\u4E32
            String data = JSON.toJSONString(goods);

            IndexRequest indexRequest=new IndexRequest(&quot;goods&quot;).source(data,XContentType.JSON);
            bulkRequest.add(indexRequest);

        }

        BulkResponse response = client.bulk(bulkRequest, RequestOptions.DEFAULT);
        System.out.println(response.status());

    }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="elasticsearch\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#elasticsearch\u67E5\u8BE2" aria-hidden="true">#</a> ElasticSearch\u67E5\u8BE2</h4><h5 id="_1\u3001matchall" tabindex="-1"><a class="header-anchor" href="#_1\u3001matchall" aria-hidden="true">#</a> 1\u3001matchAll</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>	/**
     * \u67E5\u8BE2\u6240\u6709
     *  1. matchAll
     *  2. \u5C06\u67E5\u8BE2\u7ED3\u679C\u5C01\u88C5\u4E3AGoods\u5BF9\u8C61\uFF0C\u88C5\u8F7D\u5230List\u4E2D
     *  3. \u5206\u9875\u3002\u9ED8\u8BA4\u663E\u793A10\u6761
     */
    @Test
    public void matchAll() throws IOException {

        //2. \u6784\u5EFA\u67E5\u8BE2\u8BF7\u6C42\u5BF9\u8C61\uFF0C\u6307\u5B9A\u67E5\u8BE2\u7684\u7D22\u5F15\u540D\u79F0
        SearchRequest searchRequest=new SearchRequest(&quot;goods&quot;);

        //4. \u521B\u5EFA\u67E5\u8BE2\u6761\u4EF6\u6784\u5EFA\u5668SearchSourceBuilder
        SearchSourceBuilder sourceBuilder=new SearchSourceBuilder();

        //6. \u67E5\u8BE2\u6761\u4EF6
        QueryBuilder queryBuilder= QueryBuilders.matchAllQuery();
        //5. \u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6
        sourceBuilder.query(queryBuilder);

        //3. \u6DFB\u52A0\u67E5\u8BE2\u6761\u4EF6\u6784\u5EFA\u5668 SearchSourceBuilder
        searchRequest.source(sourceBuilder);
        // 8 . \u6DFB\u52A0\u5206\u9875\u4FE1\u606F  \u4E0D\u8BBE\u7F6E \u9ED8\u8BA410\u6761
//        sourceBuilder.from(0);
//        sourceBuilder.size(100);
        //1. \u67E5\u8BE2,\u83B7\u53D6\u67E5\u8BE2\u7ED3\u679C

        SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);

        //7. \u83B7\u53D6\u547D\u4E2D\u5BF9\u8C61 SearchHits
        SearchHits hits = searchResponse.getHits();

        //7.1 \u83B7\u53D6\u603B\u8BB0\u5F55\u6570
      Long total= hits.getTotalHits().value;
        System.out.println(&quot;\u603B\u6570\uFF1A&quot;+total);
        //7.2 \u83B7\u53D6Hits\u6570\u636E  \u6570\u7EC4
        SearchHit[] hits1 = hits.getHits();
            //\u83B7\u53D6json\u5B57\u7B26\u4E32\u683C\u5F0F\u7684\u6570\u636E
        List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();
        for (SearchHit searchHit : hits1) {
            String sourceAsString = searchHit.getSourceAsString();
            //\u8F6C\u4E3Ajava\u5BF9\u8C61
            Goods goods = JSON.parseObject(sourceAsString, Goods.class);
            goodsList.add(goods);
        }

        for (Goods goods : goodsList) {
            System.out.println(goods);
        }

    }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+r+`" alt=""></p><h5 id="_2\u3001-termquery-\u3001termsquery" tabindex="-1"><a class="header-anchor" href="#_2\u3001-termquery-\u3001termsquery" aria-hidden="true">#</a> 2\u3001 termQuery \u3001termsQuery</h5><p>term\u67E5\u8BE2\u548C\u5B57\u6BB5\u7C7B\u578B\u6709\u5173\u7CFB\uFF0C\u9996\u5148\u56DE\u987E\u4E00\u4E0BElasticSearch\u4E24\u4E2A\u6570\u636E\u7C7B\u578B</p><p>ElasticSearch\u4E24\u4E2A\u6570\u636E\u7C7B\u578B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>text\uFF1A\u4F1A\u5206\u8BCD\uFF0C\u4E0D\u652F\u6301\u805A\u5408

keyword\uFF1A\u4E0D\u4F1A\u5206\u8BCD\uFF0C\u5C06\u5168\u90E8\u5185\u5BB9\u4F5C\u4E3A\u4E00\u4E2A\u8BCD\u6761\uFF0C\u652F\u6301\u805A\u5408
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>term\u67E5\u8BE2\uFF1A\u4E0D\u4F1A\u5BF9\u67E5\u8BE2\u6761\u4EF6\u8FDB\u884C\u5206\u8BCD\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET goods/_search
{
  &quot;query&quot;: {
    &quot;term&quot;: {
      &quot;title&quot;: {
        &quot;value&quot;: &quot;\u534E\u4E3A&quot;
      }
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>term\u67E5\u8BE2\uFF0C\u67E5\u8BE2text\u7C7B\u578B\u5B57\u6BB5\u65F6\uFF0C\u53EA\u6709\u5176\u4E2D\u7684\u5355\u8BCD\u76F8\u5339\u914D\u90FD\u4F1A\u67E5\u5230\uFF0Ctext\u5B57\u6BB5\u4F1A\u5BF9\u6570\u636E\u8FDB\u884C\u5206\u8BCD</p><p>\u4F8B\u5982\uFF1A\u67E5\u8BE2title \u4E3A\u201C\u534E\u4E3A\u201D\u7684\uFF0Ctitle type \u4E3Atext <img src="`+v+'" alt=""><img src="'+c+'" alt=""> \u67E5\u8BE2categoryName \u5B57\u6BB5\u65F6\uFF0CcategoryName\u5B57\u6BB5\u4E3Akeyword ,keyword\uFF1A\u4E0D\u4F1A\u5206\u8BCD\uFF0C\u5C06\u5168\u90E8\u5185\u5BB9\u4F5C\u4E3A\u4E00\u4E2A\u8BCD\u6761, \u5373\u5B8C\u5168\u5339\u914D\uFF0C\u624D\u80FD\u67E5\u8BE2\u51FA\u7ED3\u679C <img src="'+o+`" alt=""></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET goods/_search
{
  &quot;query&quot;: {
    &quot;term&quot;: {
      &quot;categoryName&quot;: {
        &quot;value&quot;: &quot;\u534E\u4E3A\u624B\u673A&quot;
      }
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+m+`" alt=""> termQuery \u4EE3\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
// \u5C06matchAll\u4EE3\u7801\u4E2D \u8BBE\u7F6E\u67E5\u8BE2\u6761\u4EF6\u4FEE\u6539\u4E3A
// termQuery \u5B8C\u5168\u5339\u914D
QueryBuilder queryBuilder = QueryBuilders.termQuery(&quot;title&quot;, &quot;\u534E\u4E3A&quot;);
// termsQuery \u4E00\u6B21\u5339\u914D\u591A\u4E2A\u503C
QueryBuilder queryBuilder = QueryBuilders.termQuery(&quot;title&quot;, &quot;\u534E\u4E3A&quot;, &quot;\u5C0F\u7C73&quot;, &quot;\u4E09\u661F&quot;);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3\u3001matchquery\u3001multimatchquery" tabindex="-1"><a class="header-anchor" href="#_3\u3001matchquery\u3001multimatchquery" aria-hidden="true">#</a> 3\u3001matchQuery\u3001multiMatchQuery</h5><p>match\u67E5\u8BE2\uFF1A</p><p>\u2022\u4F1A\u5BF9\u67E5\u8BE2\u6761\u4EF6\u8FDB\u884C\u5206\u8BCD\u3002</p><p>\u2022\u7136\u540E\u5C06\u5206\u8BCD\u540E\u7684\u67E5\u8BE2\u6761\u4EF6\u548C\u8BCD\u6761\u8FDB\u884C\u7B49\u503C\u5339\u914D</p><p>\u2022\u9ED8\u8BA4\u53D6\u5E76\u96C6\uFF08OR\uFF09</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># match\u67E5\u8BE2
GET goods/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;title&quot;: &quot;\u534E\u4E3A\u624B\u673A&quot;
    }
  },
  &quot;size&quot;: 500
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>matchQuery \u4EE3\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// matchQuery \u5355\u4E2A\u5339\u914D
MatchQueryBuilder queryBuilder = QueryBuilders.matchQuery(&quot;title&quot;, &quot;\u534E\u4E3A&quot;);
// multiMatchQuery \u5339\u914D\u591A\u4E2A\u5B57\u6BB5
MatchQueryBuilder queryBuilder = QueryBuilders. multiMatchQuery(&quot;text&quot;, &quot;field1&quot;, &quot;field2&quot;..);  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u603B\u7ED3\uFF1A</p><ul><li><p>term query\u4F1A\u53BB\u5012\u6392\u7D22\u5F15\u4E2D\u5BFB\u627E\u786E\u5207\u7684term\uFF0C\u5B83\u5E76\u4E0D\u77E5\u9053\u5206\u8BCD\u5668\u7684\u5B58\u5728\u3002\u8FD9\u79CD\u67E5\u8BE2\u9002\u5408keyword \u3001numeric\u3001date</p></li><li><p>match query\u77E5\u9053\u5206\u8BCD\u5668\u7684\u5B58\u5728\u3002\u5E76\u4E14\u7406\u89E3\u662F\u5982\u4F55\u88AB\u5206\u8BCD\u7684</p></li></ul><h5 id="_4\u3001\u6A21\u7CCA\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6A21\u7CCA\u67E5\u8BE2" aria-hidden="true">#</a> 4\u3001\u6A21\u7CCA\u67E5\u8BE2</h5><p>a\u3001wildcard\u67E5\u8BE2</p><p>wildcard\u67E5\u8BE2\uFF1A\u4F1A\u5BF9\u67E5\u8BE2\u6761\u4EF6\u8FDB\u884C\u5206\u8BCD\u3002\u8FD8\u53EF\u4EE5\u4F7F\u7528\u901A\u914D\u7B26 ?\uFF08\u4EFB\u610F\u5355\u4E2A\u5B57\u7B26\uFF09 \u548C * \uFF080\u4E2A\u6216\u591A\u4E2A\u5B57\u7B26\uFF09</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;*\u534E*&quot;  \u5305\u542B\u534E\u5B57\u7684
&quot;\u534E*&quot;   \u534E\u5B57\u540E\u8FB9\u591A\u4E2A\u5B57\u7B26
&quot;\u534E?&quot;  \u534E\u5B57\u540E\u8FB9\u591A\u4E2A\u5B57\u7B26
&quot;*\u534E&quot;\u6216&quot;?\u534E&quot; \u4F1A\u5F15\u53D1\u5168\u8868\uFF08\u5168\u7D22\u5F15\uFF09\u626B\u63CF \u6CE8\u610F\u6548\u7387\u95EE\u9898
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># wildcard \u67E5\u8BE2\u3002\u67E5\u8BE2\u6761\u4EF6\u5206\u8BCD\uFF0C\u6A21\u7CCA\u67E5\u8BE2
GET goods/_search
{
  &quot;query&quot;: {
    &quot;wildcard&quot;: {
      &quot;title&quot;: {
        &quot;value&quot;: &quot;\u534E*&quot;
      }
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>b\u3001\u6B63\u5219\u67E5\u8BE2</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\\W\uFF1A\u5339\u914D\u5305\u62EC\u4E0B\u5212\u7EBF\u7684\u4EFB\u4F55\u5355\u8BCD\u5B57\u7B26\uFF0C\u7B49\u4EF7\u4E8E [A-Z a-z 0-9_]   \u5F00\u5934\u7684\u53CD\u659C\u6760\u662F\u8F6C\u4E49\u7B26

+\u53F7\u591A\u6B21\u51FA\u73B0

(.)*\u4E3A\u4EFB\u610F\u5B57\u7B26
\u6B63\u5219\u67E5\u8BE2\u53D6\u51B3\u4E8E\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u6548\u7387

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
GET goods/_search
{
  &quot;query&quot;: {
    &quot;regexp&quot;: {
      &quot;title&quot;: &quot;\\\\w+(.)*&quot;
    }
  }
}


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>c\u3001\u524D\u7F00\u67E5\u8BE2</p><p>\u5BF9keyword\u7C7B\u578B\u652F\u6301\u6BD4\u8F83\u597D</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u524D\u7F00\u67E5\u8BE2 \u5BF9keyword\u7C7B\u578B\u652F\u6301\u6BD4\u8F83\u597D
GET goods/_search
{
  &quot;query&quot;: {
    &quot;prefix&quot;: {
      &quot;brandName&quot;: {
        &quot;value&quot;: &quot;\u4E09&quot;
      }
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6A21\u7CCA\u67E5\u8BE2\u4EE3\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//\u6A21\u7CCA\u67E5\u8BE2
WildcardQueryBuilder query = QueryBuilders.wildcardQuery(&quot;title&quot;, &quot;\u534E*&quot;);//\u534E\u540E\u591A\u4E2A\u5B57\u7B26
//\u6B63\u5219\u67E5\u8BE2
RegexpQueryBuilder query = QueryBuilders.regexpQuery(&quot;title&quot;, &quot;\\\\w+(.)*&quot;);
//\u524D\u7F00\u67E5\u8BE2
PrefixQueryBuilder query = QueryBuilders.prefixQuery(&quot;brandName&quot;, &quot;\u4E09&quot;);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5\u3001\u8303\u56F4-\u6392\u5E8F\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u8303\u56F4-\u6392\u5E8F\u67E5\u8BE2" aria-hidden="true">#</a> 5\u3001\u8303\u56F4&amp;\u6392\u5E8F\u67E5\u8BE2</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u8303\u56F4\u67E5\u8BE2
GET goods/_search
{
  &quot;query&quot;: {
    &quot;range&quot;: {
      &quot;price&quot;: {
        &quot;gte&quot;: 2000,
        &quot;lte&quot;: 3000
      }
    }
  },
  &quot;sort&quot;: [
    {
      &quot;price&quot;: {
        &quot;order&quot;: &quot;desc&quot;
      }
    }
  ]
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8303\u56F4\u67E5\u8BE2API</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> //\u8303\u56F4\u67E5\u8BE2 \u4EE5price \u4EF7\u683C\u4E3A\u6761\u4EF6
RangeQueryBuilder query = QueryBuilders.rangeQuery(&quot;price&quot;);

//\u6307\u5B9A\u4E0B\u9650
query.gte(2000);
//\u6307\u5B9A\u4E0A\u9650
query.lte(3000);

sourceBuilder.query(query);

//\u6392\u5E8F  \u4EF7\u683C \u964D\u5E8F\u6392\u5217
sourceBuilder.sort(&quot;price&quot;,SortOrder.DESC);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6\u3001querystring\u591A\u6761\u4EF6\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_6\u3001querystring\u591A\u6761\u4EF6\u67E5\u8BE2" aria-hidden="true">#</a> 6\u3001queryString\u591A\u6761\u4EF6\u67E5\u8BE2</h5><p>queryString \u591A\u6761\u4EF6\u67E5\u8BE2</p><p>\u2022\u4F1A\u5BF9\u67E5\u8BE2\u6761\u4EF6\u8FDB\u884C\u5206\u8BCD\u3002</p><p>\u2022\u7136\u540E\u5C06\u5206\u8BCD\u540E\u7684\u67E5\u8BE2\u6761\u4EF6\u548C\u8BCD\u6761\u8FDB\u884C\u7B49\u503C\u5339\u914D</p><p>\u2022\u9ED8\u8BA4\u53D6\u5E76\u96C6\uFF08OR\uFF09</p><p>\u2022\u53EF\u4EE5\u6307\u5B9A\u591A\u4E2A\u67E5\u8BE2\u5B57\u6BB5</p><p>query_string\uFF1A\u8BC6\u522Bquery\u4E2D\u7684\u8FDE\u63A5\u7B26\uFF08or \u3001and\uFF09</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># queryString

GET goods/_search
{
  &quot;query&quot;: {
    &quot;query_string&quot;: {
      &quot;fields&quot;: [&quot;title&quot;,&quot;categoryName&quot;,&quot;brandName&quot;], 
      &quot;query&quot;: &quot;\u534E\u4E3A AND \u624B\u673A&quot;
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>simple_query_string\uFF1A\u4E0D\u8BC6\u522Bquery\u4E2D\u7684\u8FDE\u63A5\u7B26\uFF08or \u3001and\uFF09\uFF0C\u67E5\u8BE2\u65F6\u4F1A\u5C06 \u201C\u534E\u4E3A\u201D\u3001\u201Cand\u201D\u3001\u201C\u624B\u673A\u201D\u5206\u522B\u8FDB\u884C\u67E5\u8BE2</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET goods/_search
{
  &quot;query&quot;: {
    &quot;simple_query_string&quot;: {
      &quot;fields&quot;: [&quot;title&quot;,&quot;categoryName&quot;,&quot;brandName&quot;], 
      &quot;query&quot;: &quot;\u534E\u4E3A AND \u624B\u673A&quot;
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>query_string\uFF1A\u6709default_operator\u8FDE\u63A5\u7B26\u7684\u811A\u672C</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET goods/_search
{
  &quot;query&quot;: {
    &quot;query_string&quot;: {
      &quot;fields&quot;: [&quot;title&quot;,&quot;brandName&quot;,&quot;categoryName&quot;],
      &quot;query&quot;: &quot;\u534E\u4E3A\u624B\u673A &quot;
      , &quot;default_operator&quot;: &quot;AND&quot;
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>javaApi</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>QueryStringQueryBuilder query = QueryBuilders.queryStringQuery(&quot;\u534E\u4E3A\u624B\u673A&quot;).field(&quot;title&quot;).field(&quot;categoryName&quot;)
.field(&quot;brandName&quot;).defaultOperator(Operator.AND);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>simple_query_string\uFF1A\u6709default_operator\u8FDE\u63A5\u7B26\u7684\u811A\u672C</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET goods/_search
{
  &quot;query&quot;: {
    &quot;simple_query_string&quot;: {
      &quot;fields&quot;: [&quot;title&quot;,&quot;brandName&quot;,&quot;categoryName&quot;],
      &quot;query&quot;: &quot;\u534E\u4E3A\u624B\u673A &quot;
      , &quot;default_operator&quot;: &quot;OR&quot;
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_7\u3001\u5E03\u5C14\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u5E03\u5C14\u67E5\u8BE2" aria-hidden="true">#</a> 7\u3001\u5E03\u5C14\u67E5\u8BE2</h5><p>boolQuery\uFF1A\u5BF9\u591A\u4E2A\u67E5\u8BE2\u6761\u4EF6\u8FDE\u63A5\u3002\u8FDE\u63A5\u65B9\u5F0F\uFF1A</p><p>\u2022must\uFF08and\uFF09\uFF1A\u6761\u4EF6\u5FC5\u987B\u6210\u7ACB</p><p>\u2022must_not\uFF08not\uFF09\uFF1A\u6761\u4EF6\u5FC5\u987B\u4E0D\u6210\u7ACB</p><p>\u2022should\uFF08or\uFF09\uFF1A\u6761\u4EF6\u53EF\u4EE5\u6210\u7ACB</p><p>\u2022filter\uFF1A\u6761\u4EF6\u5FC5\u987B\u6210\u7ACB\uFF0C\u6027\u80FD\u6BD4must\u9AD8\u3002\u4E0D\u4F1A\u8BA1\u7B97\u5F97\u5206</p><p>**\u5F97\u5206:**\u5373\u6761\u4EF6\u5339\u914D\u5EA6,\u5339\u914D\u5EA6\u8D8A\u9AD8\uFF0C\u5F97\u5206\u8D8A\u9AD8</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># boolquery
#must\u548Cfilter\u914D\u5408\u4F7F\u7528\u65F6\uFF0Cmax_score\uFF08\u5F97\u5206\uFF09\u662F\u663E\u793A\u7684
#must \u9ED8\u8BA4\u6570\u7EC4\u5F62\u5F0F
GET goods/_search
{
  &quot;query&quot;: {
    &quot;bool&quot;: {
      &quot;must&quot;: [
        {
          &quot;term&quot;: {
            &quot;brandName&quot;: {
              &quot;value&quot;: &quot;\u534E\u4E3A&quot;
            }
          }
        }
      ],
      &quot;filter&quot;:[ 
        {
        &quot;term&quot;: {
          &quot;title&quot;: &quot;\u624B\u673A&quot;
        }
       },
       {
         &quot;range&quot;:{
          &quot;price&quot;: {
            &quot;gte&quot;: 2000,
            &quot;lte&quot;: 3000
         }
         }
       }
      
      ]
    }
  }
}
#filter \u5355\u72EC\u4F7F\u7528   filter\u53EF\u4EE5\u662F\u5355\u4E2A\u6761\u4EF6\uFF0C\u4E5F\u53EF\u591A\u4E2A\u6761\u4EF6\uFF08\u6570\u7EC4\u5F62\u5F0F\uFF09
GET goods/_search
{
  &quot;query&quot;: {
    &quot;bool&quot;: {
      &quot;filter&quot;: [
        {
          &quot;term&quot;: {
            &quot;brandName&quot;: {
              &quot;value&quot;: &quot;\u534E\u4E3A&quot;
            }
          }
        }
      ]
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5E03\u5C14\u67E5\u8BE2-JavaAPI</p><p>\u5E03\u5C14\u67E5\u8BE2\uFF1AboolQuery</p><p>\u67E5\u8BE2\u54C1\u724C\u540D\u79F0\u4E3A:\u534E\u4E3A \u67E5\u8BE2\u6807\u9898\u5305\u542B\uFF1A\u624B\u673A \u67E5\u8BE2\u4EF7\u683C\u5728\uFF1A2000-3000 must \u3001filter\u4E3A\u8FDE\u63A5\u65B9\u5F0F</p><p>term\u3001match\u4E3A\u4E0D\u540C\u7684\u67E5\u8BE2\u65B9\u5F0F</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//1.\u6784\u5EFAboolQuery
BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();
//2.\u6784\u5EFA\u5404\u4E2A\u67E5\u8BE2\u6761\u4EF6
//2.1 \u67E5\u8BE2\u54C1\u724C\u540D\u79F0\u4E3A:\u534E\u4E3A
TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(&quot;brandName&quot;, &quot;\u534E\u4E3A&quot;);
boolQuery.must(termQueryBuilder);
//2.2. \u67E5\u8BE2\u6807\u9898\u5305\u542B\uFF1A\u624B\u673A
MatchQueryBuilder matchQuery = QueryBuilders.matchQuery(&quot;title&quot;, &quot;\u624B\u673A&quot;);
boolQuery.filter(matchQuery);

//2.3 \u67E5\u8BE2\u4EF7\u683C\u5728\uFF1A2000-3000
RangeQueryBuilder rangeQuery = QueryBuilders.rangeQuery(&quot;price&quot;);
rangeQuery.gte(2000);
rangeQuery.lte(3000);
boolQuery.filter(rangeQuery);

sourceBuilder.query(boolQuery);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8\u3001\u805A\u5408\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_8\u3001\u805A\u5408\u67E5\u8BE2" aria-hidden="true">#</a> 8\u3001\u805A\u5408\u67E5\u8BE2</h5><p>\u2022\u6307\u6807\u805A\u5408\uFF1A\u76F8\u5F53\u4E8EMySQL\u7684\u805A\u5408\u51FD\u6570\u3002max\u3001min\u3001avg\u3001sum\u7B49</p><p>\u2022\u6876\u805A\u5408\uFF1A\u76F8\u5F53\u4E8EMySQL\u7684 group by \u64CD\u4F5C\u3002\u4E0D\u8981\u5BF9text\u7C7B\u578B\u7684\u6570\u636E\u8FDB\u884C\u5206\u7EC4\uFF0C\u4F1A\u5931\u8D25\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u805A\u5408\u67E5\u8BE2

# \u6307\u6807\u805A\u5408 \u805A\u5408\u51FD\u6570

GET goods/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;title&quot;: &quot;\u624B\u673A&quot;
    }
  },
  &quot;aggs&quot;: {
    &quot;max_price&quot;: {
      &quot;max&quot;: {
        &quot;field&quot;: &quot;price&quot;
      }
    }
  }
}

# \u6876\u805A\u5408  \u5206\u7EC4

GET goods/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;title&quot;: &quot;\u624B\u673A&quot;
    }
  },
  &quot;aggs&quot;: {
    &quot;goods_brands&quot;: {
      &quot;terms&quot;: {
        &quot;field&quot;: &quot;brandName&quot;,
        &quot;size&quot;: 100
      }
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u805A\u5408\u67E5\u8BE2-JavaAPI \u805A\u5408\u67E5\u8BE2\uFF1A\u6876\u805A\u5408\uFF0C\u5206\u7EC4\u67E5\u8BE2</p><ol><li>\u67E5\u8BE2title\u5305\u542B\u624B\u673A\u7684\u6570\u636E</li><li>\u67E5\u8BE2\u54C1\u724C\u5217\u8868</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/**
     * \u805A\u5408\u67E5\u8BE2\uFF1A\u6876\u805A\u5408\uFF0C\u5206\u7EC4\u67E5\u8BE2
     * 1. \u67E5\u8BE2title\u5305\u542B\u624B\u673A\u7684\u6570\u636E
     * 2. \u67E5\u8BE2\u54C1\u724C\u5217\u8868
     */
@Test
public void testAggQuery() throws IOException {

    SearchRequest searchRequest=new SearchRequest(&quot;goods&quot;);

    SearchSourceBuilder sourceBuilder=new SearchSourceBuilder();
    //1. \u67E5\u8BE2title\u5305\u542B\u624B\u673A\u7684\u6570\u636E

    MatchQueryBuilder queryBuilder = QueryBuilders.matchQuery(&quot;title&quot;, &quot;\u624B\u673A&quot;);

    sourceBuilder.query(queryBuilder);
    //2. \u67E5\u8BE2\u54C1\u724C\u5217\u8868  \u53EA\u5C55\u793A\u524D100\u6761
    AggregationBuilder aggregation=AggregationBuilders.terms(&quot;goods_brands&quot;).field(&quot;brandName&quot;).size(100);
    sourceBuilder.aggregation(aggregation);


    searchRequest.source(sourceBuilder);

    SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);

    //7. \u83B7\u53D6\u547D\u4E2D\u5BF9\u8C61 SearchHits
    SearchHits hits = searchResponse.getHits();

    //7.1 \u83B7\u53D6\u603B\u8BB0\u5F55\u6570
    Long total= hits.getTotalHits().value;
    System.out.println(&quot;\u603B\u6570\uFF1A&quot;+total);

    // aggregations \u5BF9\u8C61
    Aggregations aggregations = searchResponse.getAggregations();
    //\u5C06aggregations \u8F6C\u5316\u4E3Amap
    Map&lt;String, Aggregation&gt; aggregationMap = aggregations.asMap();


    //\u901A\u8FC7key\u83B7\u53D6goods_brands \u5BF9\u8C61 \u4F7F\u7528Aggregation\u7684\u5B50\u7C7B\u63A5\u6536  buckets\u5C5E\u6027\u5728Terms\u63A5\u53E3\u4E2D\u4F53\u73B0

    //        Aggregation goods_brands1 = aggregationMap.get(&quot;goods_brands&quot;);
    Terms goods_brands =(Terms) aggregationMap.get(&quot;goods_brands&quot;);

    //\u83B7\u53D6buckets \u6570\u7EC4\u96C6\u5408
    List&lt;? extends Terms.Bucket&gt; buckets = goods_brands.getBuckets();

    Map&lt;String,Object&gt;map=new HashMap&lt;&gt;();
    //\u904D\u5386buckets   key \u5C5E\u6027\u540D\uFF0Cdoc_count \u7EDF\u8BA1\u805A\u5408\u6570
    for (Terms.Bucket bucket : buckets) {

        System.out.println(bucket.getKey());
        map.put(bucket.getKeyAsString(),bucket.getDocCount());
    }

    System.out.println(map);

}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_9\u3001\u9AD8\u4EAE\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_9\u3001\u9AD8\u4EAE\u67E5\u8BE2" aria-hidden="true">#</a> 9\u3001\u9AD8\u4EAE\u67E5\u8BE2</h5><p>\u9AD8\u4EAE\u4E09\u8981\u7D20\uFF1A</p><p>\u2022\u9AD8\u4EAE\u5B57\u6BB5</p><p>\u2022\u524D\u7F00</p><p>\u2022\u540E\u7F00</p><p>\u9ED8\u8BA4\u524D\u540E\u7F00 \uFF1Aem</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>\u624B\u673A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET goods/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;title&quot;: &quot;\u7535\u89C6&quot;
    }
  },
  &quot;highlight&quot;: {
    &quot;fields&quot;: {
      &quot;title&quot;: {
        &quot;pre_tags&quot;: &quot;&lt;font color=&#39;red&#39;&gt;&quot;,
        &quot;post_tags&quot;: &quot;&lt;/font&gt;&quot;
      }
    }
  }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9AD8\u4EAE\u67E5\u8BE2 \u4EE3\u7801</p><p>\u5B9E\u65BD\u6B65\u9AA4\uFF1A</p><ol><li>\u8BBE\u7F6E\u9AD8\u4EAE\uFF1A\u9AD8\u4EAE\u5B57\u6BB5\u3001\u524D\u7F00\u3001 \u540E\u7F00</li><li>\u5C06\u9AD8\u4EAE\u4E86\u7684\u5B57\u6BB5\u6570\u636E\uFF0C\u66FF\u6362\u539F\u6709\u6570\u636E</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/**
     *
     * \u9AD8\u4EAE\u67E5\u8BE2\uFF1A
     *  1. \u8BBE\u7F6E\u9AD8\u4EAE\uFF1A\u9AD8\u4EAE\u5B57\u6BB5\u3001\u524D\u7F00\u3001 \u540E\u7F00
     *  2. \u5C06\u9AD8\u4EAE\u4E86\u7684\u5B57\u6BB5\u6570\u636E\uFF0C\u66FF\u6362\u539F\u6709\u6570\u636E
     */
@Test
public void testHighLightQuery() throws IOException {


    SearchRequest searchRequest = new SearchRequest(&quot;goods&quot;);

    SearchSourceBuilder sourceBulider = new SearchSourceBuilder();

    // 1. \u67E5\u8BE2title\u5305\u542B\u624B\u673A\u7684\u6570\u636E
    MatchQueryBuilder query = QueryBuilders.matchQuery(&quot;title&quot;, &quot;\u624B\u673A&quot;);

    sourceBulider.query(query);

    //\u8BBE\u7F6E\u9AD8\u4EAE
    HighlightBuilder highlighter = new HighlightBuilder();
    //\u8BBE\u7F6E\u4E09\u8981\u7D20
    highlighter.field(&quot;title&quot;);
    //\u8BBE\u7F6E\u524D\u540E\u7F00\u6807\u7B7E
    highlighter.preTags(&quot;&lt;font color=&#39;red&#39;&gt;&quot;);
    highlighter.postTags(&quot;&lt;/font&gt;&quot;);

    //\u52A0\u8F7D\u5DF2\u7ECF\u8BBE\u7F6E\u597D\u7684\u9AD8\u4EAE\u914D\u7F6E
    sourceBulider.highlighter(highlighter);

    searchRequest.source(sourceBulider);

    SearchResponse searchResponse = client.search(searchRequest, RequestOptions.DEFAULT);


    SearchHits searchHits = searchResponse.getHits();
    //\u83B7\u53D6\u8BB0\u5F55\u6570
    long value = searchHits.getTotalHits().value;
    System.out.println(&quot;\u603B\u8BB0\u5F55\u6570\uFF1A&quot;+value);

    List&lt;Goods&gt; goodsList = new ArrayList&lt;&gt;();
    SearchHit[] hits = searchHits.getHits();
    for (SearchHit hit : hits) {
        String sourceAsString = hit.getSourceAsString();

        //\u8F6C\u4E3Ajava
        Goods goods = JSON.parseObject(sourceAsString, Goods.class);

        // \u83B7\u53D6\u9AD8\u4EAE\u7ED3\u679C\uFF0C\u66FF\u6362goods\u4E2D\u7684title
        Map&lt;String, HighlightField&gt; highlightFields = hit.getHighlightFields();
        HighlightField HighlightField = highlightFields.get(&quot;title&quot;);
        Text[] fragments = HighlightField.fragments();
        //highlight title\u66FF\u6362 \u66FF\u6362goods\u4E2D\u7684title
        goods.setTitle(fragments[0].toString());
        goodsList.add(goods);
    }

    for (Goods goods : goodsList) {
        System.out.println(goods);
    }


}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u91CD\u5EFA\u7D22\u5F15-\u7D22\u5F15\u522B\u540D" tabindex="-1"><a class="header-anchor" href="#\u91CD\u5EFA\u7D22\u5F15-\u7D22\u5F15\u522B\u540D" aria-hidden="true">#</a> \u91CD\u5EFA\u7D22\u5F15&amp;\u7D22\u5F15\u522B\u540D</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\u67E5\u8BE2\u522B\u540D \u9ED8\u8BA4\u522B\u540D\u65E0\u6CD5\u67E5\u770B\uFF0C\u9ED8\u8BA4\u522B\u540D\u540C\u7D22\u5F15\u540D
GET goods/_alias/
#\u7ED3\u679C
{
  &quot;goods&quot; : {
    &quot;aliases&quot; : { }
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1.\u65B0\u5EFAstudent_index_v1\u7D22\u5F15</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># -------\u91CD\u5EFA\u7D22\u5F15-----------

# \u65B0\u5EFAstudent_index_v1\u3002\u7D22\u5F15\u540D\u79F0\u5FC5\u987B\u5168\u90E8\u5C0F\u5199

PUT student_index_v1
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;birthday&quot;:{
        &quot;type&quot;: &quot;date&quot;
      }
    }
  }
}
#\u67E5\u770B student_index_v1 \u7ED3\u6784
GET student_index_v1
#\u6DFB\u52A0\u6570\u636E
PUT student_index_v1/_doc/1
{
  &quot;birthday&quot;:&quot;1999-11-11&quot;
}
#\u67E5\u770B\u6570\u636E
GET student_index_v1/_search

#\u6DFB\u52A0\u6570\u636E
PUT student_index_v1/_doc/1
{
  &quot;birthday&quot;:&quot;1999\u5E7411\u670811\u65E5&quot;
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.\u91CD\u5EFA\u7D22\u5F15:\u5C06student_index_v1 \u6570\u636E\u62F7\u8D1D\u5230 student_index_v2</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u4E1A\u52A1\u53D8\u66F4\u4E86\uFF0C\u9700\u8981\u6539\u53D8birthday\u5B57\u6BB5\u7684\u7C7B\u578B\u4E3Atext

# 1. \u521B\u5EFA\u65B0\u7684\u7D22\u5F15 student_index_v2
# 2. \u5C06student_index_v1 \u6570\u636E\u62F7\u8D1D\u5230 student_index_v2

# \u521B\u5EFA\u65B0\u7684\u7D22\u5F15 student_index_v2
PUT student_index_v2
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;birthday&quot;:{
        &quot;type&quot;: &quot;text&quot;
      }
    }
  }
}
# \u5C06student_index_v1 \u6570\u636E\u62F7\u8D1D\u5230 student_index_v2
# _reindex \u62F7\u8D1D\u6570\u636E
POST _reindex
{
  &quot;source&quot;: {
    &quot;index&quot;: &quot;student_index_v1&quot;
  },
  &quot;dest&quot;: {
    &quot;index&quot;: &quot;student_index_v2&quot;
  }
}

GET student_index_v2/_search



PUT student_index_v2/_doc/2
{
  &quot;birthday&quot;:&quot;1999\u5E7411\u670811\u65E5&quot;
}


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.\u521B\u5EFA\u7D22\u5F15\u5E93\u522B\u540D\uFF1A</p><p>\u6CE8\u610F\uFF1ADELETE student_index_v1 \u8FD9\u4E00\u64CD\u4F5C\u5C06\u5220\u9664student_index_v1\u7D22\u5F15\u5E93\uFF0C\u5E76\u4E0D\u662F\u5220\u9664\u522B\u540D</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u601D\u8003\uFF1A \u73B0\u5728java\u4EE3\u7801\u4E2D\u64CD\u4F5Ces\uFF0C\u8FD8\u662F\u4F7F\u7528\u7684\u5B9Estudent_index_v1\u8001\u7684\u7D22\u5F15\u540D\u79F0\u3002
# 1. \u6539\u4EE3\u7801\uFF08\u4E0D\u63A8\u8350\uFF09
# 2. \u7D22\u5F15\u522B\u540D\uFF08\u63A8\u8350\uFF09

# \u6B65\u9AA4\uFF1A
# 0. \u5148\u5220\u9664student_index_v1
# 1. \u7ED9student_index_v2\u8D77\u4E2A\u522B\u540D student_index_v1



# \u5148\u5220\u9664student_index_v1
#DELETE student_index_v1 \u8FD9\u4E00\u64CD\u4F5C\u5C06\u5220\u9664student_index_v1\u7D22\u5F15\u5E93
#\u7D22\u5F15\u5E93\u9ED8\u8BA4\u7684\u522B\u540D\u4E0E\u7D22\u5F15\u5E93\u540C\u540D\uFF0C\u65E0\u6CD5\u5220\u9664

# \u7ED9student_index_v1\u8D77\u4E2A\u522B\u540D student_index_v11
POST student_index_v2/_alias/student_index_v11
#\u6D4B\u8BD5\u5220\u9664\u547D\u4EE4
POST /_aliases
{
    &quot;actions&quot;: [
        {&quot;remove&quot;: {&quot;index&quot;: &quot;student_index_v1&quot;, &quot;alias&quot;: &quot;student_index_v11&quot;}}
    ]
}

# \u7ED9student_index_v2\u8D77\u4E2A\u522B\u540D student_index_v1
POST student_index_v2/_alias/student_index_v1

#\u67E5\u8BE2\u522B\u540D
GET goods/_alias/


GET student_index_v1/_search
GET student_index_v2/_search


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,142);function h(x,y){const i=a("ExternalLinkIcon");return d(),l("div",null,[q,e("p",null,[e("a",p,[n("\u53C2\u8003\u94FE\u63A5-ElasticSearch\u57FA\u7840\u6559\u7A0B"),t(i)])]),g])}const A=s(b,[["render",h],["__file","\u6574\u5408es.html.vue"]]);export{A as default};
