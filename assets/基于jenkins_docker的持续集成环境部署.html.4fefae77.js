import{_ as e}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as a,c as s,f as n}from"./app.4d667c68.js";const r="/assets/ef2894db.b6052d8e.png",d="/assets/49227216.4d114e34.png",i="/assets/8a439107.c2dd698b.png",c="/assets/909cdcdd.5c5157be.png",t="/assets/6f2d5912.be4eeb77.png",o="/assets/2da8c9dd.8c59bfa9.png",l="/assets/8529dc63.f574a076.png",p="/assets/56102a24.22f3b09a.png",h="/assets/c1c32f1b.6d0bdb3d.png",u="/assets/8cbca0fe.aa28b1c3.png",m="/assets/d40029aa.bc8c4eb0.png",b={},k=n(`<h1 id="jenkins-docker\u6301\u7EED\u96C6\u6210\u73AF\u5883\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#jenkins-docker\u6301\u7EED\u96C6\u6210\u73AF\u5883\u90E8\u7F72" aria-hidden="true">#</a> Jenkins+Docker\u6301\u7EED\u96C6\u6210\u73AF\u5883\u90E8\u7F72</h1><h2 id="\u4E00\u3001jenkins\u4EE5docker\u5BB9\u5668\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001jenkins\u4EE5docker\u5BB9\u5668\u8FD0\u884C" aria-hidden="true">#</a> \u4E00\u3001Jenkins\u4EE5docker\u5BB9\u5668\u8FD0\u884C</h2><h3 id="_1\u3001\u524D\u7F6E\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u524D\u7F6E\u6761\u4EF6" aria-hidden="true">#</a> 1\u3001\u524D\u7F6E\u6761\u4EF6</h3><p>\u670D\u52A1\u5668\u5B89\u88C5docker,\u5E76\u4E14\u5DF2\u7ECF\u5F00\u653Etcp\u7AEF\u53E3</p><p>\u5F00\u653Etcp\u7AEF\u53E3\uFF0C\u5F00\u542Fdocker\u8FDC\u7A0B\u8BBF\u95EE\u7684\u6B65\u9AA4\u5982\u4E0B\uFF1A</p><p>\u9996\u5148\u7F16\u8F91docker\u7684\u5BBF\u4E3B\u673A\u6587\u4EF6/lib/systemd/system/docker.service</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vi</span> /lib/systemd/system/docker.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+r+`" alt=""></p><p>\u4FEE\u6539\u4EE5ExecStart\u5F00\u5934\u7684\u884C\uFF1A\u540E\u9762\u8FFD\u52A0-H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock\uFF0C\u5373</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4FEE\u6539\u540E\u4FDD\u5B58\u6587\u4EF6\uFF0C\u7136\u540E\u901A\u77E5docker\u670D\u52A1\u505A\u51FA\u7684\u4FEE\u6539</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl daemon-reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u91CD\u542Fdocker\u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> <span class="token function">docker</span> restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u4E00\u4E0B\u770B\u662F\u5426\u80FD\u8FDE\u63A5\u5230docker api</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:2375/version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2\u3001jenkins\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2\u3001jenkins\u5B89\u88C5" aria-hidden="true">#</a> 2\u3001Jenkins\u5B89\u88C5</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token parameter variable">-p</span> <span class="token number">50000</span>:50000 <span class="token parameter variable">-d</span> <span class="token parameter variable">-v</span> /home/jenkins-home-docker:/var/jenkins_home jenkins/jenkins:lts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3\u3001-jenkins-\u63D2\u4EF6\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_3\u3001-jenkins-\u63D2\u4EF6\u5B89\u88C5" aria-hidden="true">#</a> 3\u3001 Jenkins \u63D2\u4EF6\u5B89\u88C5</h3><p>\u7CFB\u7EDF\u7BA1\u7406-&gt;\u63D2\u4EF6\u7BA1\u7406\u91CC\u8FDB\u884C\u5B89\u88C5</p><ul><li>Docker plugin \uFF1A \u63D0\u4F9Bdocker \u6784\u5EFA\u548C\u53D1\u5E03</li><li>SSH plugin \uFF1A \u63D0\u4F9B\u901A\u8FC7SSH\u5728\u8FDC\u7A0B\u4E3B\u673A\u6267\u884C\u547D\u4EE4\uFF0C\u7528\u4E8E\u90E8\u7F72\u670D\u52A1</li><li>maven plugin\uFF1A \u652F\u6301maven</li></ul><h4 id="_3-1\u3001docker\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-1\u3001docker\u914D\u7F6E" aria-hidden="true">#</a> 3.1\u3001docker\u914D\u7F6E</h4><p>\u7CFB\u7EDF\u7BA1\u7406-\u8282\u70B9\u7BA1\u7406-Configure cloud <img src="`+d+'" alt=""> Docker Host URI \u662Fdocker\u4E3B\u673A\u7684\u5730\u5740\u548C\u5F00\u653E\u7684\u7AEF\u53E3\u53F7</p><h4 id="_3-2\u3001ssh\u4E3B\u673A-\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-2\u3001ssh\u4E3B\u673A-\u914D\u7F6E" aria-hidden="true">#</a> 3.2\u3001ssh\u4E3B\u673A \u914D\u7F6E</h4><p>\u201C\u7CFB\u7EDF\u7BA1\u7406-\u7CFB\u7EDF\u8BBE\u7F6E-SSH remote hosts\u201D \u91CC\u914D\u7F6ESSH\u8FDC\u7A0B\u4E3B\u673A <img src="'+i+'" alt=""></p><h4 id="_3-3\u3001\u914D\u7F6Ejdk\u3001maven" tabindex="-1"><a class="header-anchor" href="#_3-3\u3001\u914D\u7F6Ejdk\u3001maven" aria-hidden="true">#</a> 3.3\u3001\u914D\u7F6Ejdk\u3001maven</h4><p>\u5728\u7CFB\u7EDF\u7BA1\u7406-\u5168\u5C40\u5DE5\u5177\u914D\u7F6E\u91CC\u8BBE\u7F6EJDK\u81EA\u52A8\u5B89\u88C5 <img src="'+c+'" alt=""></p><h3 id="_4\u3001-\u9879\u76EE\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_4\u3001-\u9879\u76EE\u914D\u7F6E" aria-hidden="true">#</a> 4\u3001 \u9879\u76EE\u914D\u7F6E</h3><h4 id="_4-1\u3001-\u521B\u5EFA\u4EFB\u52A1\u9009\u62E9\u6784\u5EFAmaven\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#_4-1\u3001-\u521B\u5EFA\u4EFB\u52A1\u9009\u62E9\u6784\u5EFAmaven\u9879\u76EE" aria-hidden="true">#</a> 4.1\u3001 \u521B\u5EFA\u4EFB\u52A1\u9009\u62E9\u6784\u5EFAmaven\u9879\u76EE</h4><p><img src="'+t+'" alt=""></p><h4 id="_4-2\u3001-\u914D\u7F6E\u6E90\u7801\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#_4-2\u3001-\u914D\u7F6E\u6E90\u7801\u7BA1\u7406" aria-hidden="true">#</a> 4.2\u3001 \u914D\u7F6E\u6E90\u7801\u7BA1\u7406</h4><p>\u9996\u5148\u914D\u7F6E\u6E90\u7801\uFF0C\u53EF\u4EE5\u662Fgit\u6216\u8005svn <img src="'+o+'" alt=""></p><h4 id="_4-3\u3001\u914D\u7F6E\u89E6\u53D1\u5668" tabindex="-1"><a class="header-anchor" href="#_4-3\u3001\u914D\u7F6E\u89E6\u53D1\u5668" aria-hidden="true">#</a> 4.3\u3001\u914D\u7F6E\u89E6\u53D1\u5668</h4><p>\u53EF\u4EE5\u914D\u7F6E\u81EA\u52A8\u6784\u5EFA\u6216\u8005\u624B\u52A8\u6784\u5EFA <img src="'+l+'" alt=""></p><h4 id="_4-4\u3001-\u914D\u7F6Ebuild" tabindex="-1"><a class="header-anchor" href="#_4-4\u3001-\u914D\u7F6Ebuild" aria-hidden="true">#</a> 4.4\u3001 \u914D\u7F6EBuild</h4><p>maven\u9879\u76EE\uFF0C\u6784\u5EFA\u4F7F\u7528pom.xml\uFF0C\u6267\u884Cclean package -Dmaven.test.skip=true <img src="'+p+'" alt=""></p><h4 id="_4-5\u3001-\u914D\u7F6Epost-steps" tabindex="-1"><a class="header-anchor" href="#_4-5\u3001-\u914D\u7F6Epost-steps" aria-hidden="true">#</a> 4.5\u3001 \u914D\u7F6EPost Steps</h4><h4 id="_4-5-1\u3001-\u6267\u884C\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#_4-5-1\u3001-\u6267\u884C\u811A\u672C" aria-hidden="true">#</a> 4.5.1\u3001 \u6267\u884C\u811A\u672C</h4><p>\u70B9\u51FBadd post-build step\uFF0C\u9009\u62E9\u6267\u884Cshell <img src="'+h+'" alt=""></p><h4 id="_4-5-2\u3001-docker\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_4-5-2\u3001-docker\u914D\u7F6E" aria-hidden="true">#</a> 4.5.2\u3001 docker\u914D\u7F6E</h4><p>\u70B9\u51FBadd post-build step\uFF0C\u9009\u62E9Build / Publish Docker Image \u9009\u62E9cloud\u4E3A\u5148\u524D\u914D\u7F6E\u7684docker-cloud\uFF0Cimage\u586B\u5199\u79C1\u670D\u53D1\u5E03\u5730\u5740\uFF0C\u52FE\u4E0Apush image,\u6784\u5EFA\u5B8C\u6210\u540E\u4F1A\u81EA\u52A8push\u5230\u79C1\u670D <img src="'+u+`" alt=""></p><h4 id="_4-5-3\u3001-\u8FDC\u7A0B\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#_4-5-3\u3001-\u8FDC\u7A0B\u90E8\u7F72" aria-hidden="true">#</a> 4.5.3\u3001 \u8FDC\u7A0B\u90E8\u7F72</h4><p>\u70B9\u51FBadd post-build step\uFF0C\u9009\u62E9Send files or execute commands over SSH \u9009\u62E9\u914D\u7F6E\u597D\u7684\u4E3B\u673A\uFF0C\u6DFB\u52A0\u6267\u884C\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> learning-test <span class="token parameter variable">-p</span> <span class="token number">8736</span>:8080 <span class="token parameter variable">-d</span> registry.cn-hangzhou.aliyuncs.com/wanhx/learning:1.0
<span class="token comment">### \u6216\u8005\u662Fdocker compose\u6784\u5EFA\u90E8\u7F72</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> learning.yml <span class="token parameter variable">-p</span> learning up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+m+`" alt=""></p><h3 id="_5\u3001-\u5F00\u59CB\u6784\u5EFA" tabindex="-1"><a class="header-anchor" href="#_5\u3001-\u5F00\u59CB\u6784\u5EFA" aria-hidden="true">#</a> 5\u3001 \u5F00\u59CB\u6784\u5EFA</h3><p>\u56DE\u5230\u5DE5\u7A0B\uFF0C\u70B9\u51FB\u7ACB\u5373\u6784\u5EFA\uFF0C\u63A7\u5236\u53F0\u4F1A\u8F93\u51FAbuild success</p><h3 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h3><p>\u8981\u60F3\u5B9E\u73B0\u5728Jenkins\u4E2D\u6267\u884Cdocker\u547D\u4EE4\uFF0C\u6709\u4E0B\u9762\u4E09\u79CD\u65B9\u5F0F\uFF1A 1\u3001\u5C06\u5BBF\u4E3B\u673A\u7684docker\u6587\u4EF6\u548C\u76EE\u5F55\u8FDB\u884C\u6302\u8F7D</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock   <span class="token parameter variable">-v</span> /usr/bin/docker:/usr/bin/docker 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2\u3001\u5B89\u88C5docker\u63D2\u4EF6 3\u3001\u76F4\u63A5\u53D1\u9001\u547D\u4EE4\u5230\u8FDC\u7A0B\u4E3B\u673A\u6267\u884C</p>`,51),v=[k];function _(g,f){return a(),s("div",null,v)}const S=e(b,[["render",_],["__file","\u57FA\u4E8Ejenkins+docker\u7684\u6301\u7EED\u96C6\u6210\u73AF\u5883\u90E8\u7F72.html.vue"]]);export{S as default};
